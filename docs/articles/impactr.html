<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to impactr • impactr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to impactr">
<meta property="og:description" content="impactr">
<meta property="og:image" content="https://lveras.com/impactr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">impactr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/impactr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/verasls/impactr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="impactr_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to impactr</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/verasls/impactr/blob/master/vignettes/impactr.Rmd"><code>vignettes/impactr.Rmd</code></a></small>
      <div class="hidden name"><code>impactr.Rmd</code></div>

    </div>

    
    
<p>impactr is an <a href="https://www.r-project.org">R</a> package whose main goal is to process raw accelerometer data into mechanical loading-related variables. It contains functions to read the raw data, process the accelerometer signal and to predict some mechanical loading variables such as ground reaction force (GRF) and loading rate (LR). Currently it only works with raw accelerometer data from triaxial ActiGraph accelerometers stored as csv files, but with plans to expand the support for more accelerometer brands and file types.</p>
<p>This vignette provides a short introduction on how to use impactr, guiding you through each of the functions necessary to operate it. If anything is not clear in the package documentation, please let us know by creating an issue in GitHub following this <a href="https://github.com/verasls/impactr/issues">link</a>.</p>
<div id="walkthrough" class="section level2">
<h2 class="hasAnchor">
<a href="#walkthrough" class="anchor"></a>Walkthrough</h2>
<p>Before we begin, the package needs to be installed and then loaded into your R session.</p>
<p>If you don’t have much experience using R, we recommend you to install the latest impactr release from <a href="https://cran.r-project.org">CRAN</a>, by running:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"impactr"</span><span class="op">)</span></code></pre></div>
<p>After the package is installed, it should be loaded into your R session:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lveras.com/impactr/">impactr</a></span><span class="op">)</span></code></pre></div>
<div id="read_acc" class="section level3">
<h3 class="hasAnchor">
<a href="#read_acc" class="anchor"></a>read_acc()</h3>
<p>The first step is to read the raw accelerometer data into R. We do it by using the <code><a href="../reference/read_acc.html">read_acc()</a></code> function specifying the path to the csv file containing the raw accelerometer data:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/read_acc.html">read_acc</a></span><span class="op">(</span><span class="st">"path/to/file"</span><span class="op">)</span></code></pre></div>
<p>Remember that currently impactr only accepts raw data from triaxial ActiGraph accelerometers. In the raw data, acceleration values are stored as gravitational acceleration units (1<em>g</em> = 9.81m·s<sup>-2</sup>).</p>
<p>To show the package functionalities, impactr provides some short example files. The name of these files are shown when running:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/impactr_example.html">impactr_example</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "hip-raw.csv"</span></code></pre></div>
<p>When entering one of these file names as an argument to the <code><a href="../reference/impactr_example.html">impactr_example()</a></code> function, we obtain the path to the example data, and can pass it to <code><a href="../reference/read_acc.html">read_acc()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_acc.html">read_acc</a></span><span class="op">(</span><span class="fu"><a href="../reference/impactr_example.html">impactr_example</a></span><span class="op">(</span><span class="st">"hip-raw.csv"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The output of this function was assigned to the <code>acc_data</code> object with the R’s assignment operator (<code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>).</p>
<p>We can, then, inspect this object.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">acc_data</span>
<span class="co">#&gt; # Start time:              2021-04-06 15:43:00</span>
<span class="co">#&gt; # Sampling frequency:      100Hz</span>
<span class="co">#&gt; # Accelerometer placement: Non-specified</span>
<span class="co">#&gt; # Subject body mass:       Non-specified</span>
<span class="co">#&gt; # Filter:                  No filter applied</span>
<span class="co">#&gt; # Data dimensions:         30,000 × 4</span>
<span class="co">#&gt;    timestamp           acc_X  acc_Y acc_Z</span>
<span class="co">#&gt;    &lt;dttm&gt;              &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2021-04-06 15:43:00 0.262 -0.688 0.063</span>
<span class="co">#&gt;  2 2021-04-06 15:43:00 0.25  -0.727 0.039</span>
<span class="co">#&gt;  3 2021-04-06 15:43:00 0.254 -0.816 0.191</span>
<span class="co">#&gt;  4 2021-04-06 15:43:00 0.258 -0.891 0.367</span>
<span class="co">#&gt;  5 2021-04-06 15:43:00 0.281 -0.914 0.344</span>
<span class="co">#&gt;  6 2021-04-06 15:43:00 0.316 -0.922 0.23 </span>
<span class="co">#&gt;  7 2021-04-06 15:43:00 0.32  -0.891 0.203</span>
<span class="co">#&gt;  8 2021-04-06 15:43:00 0.332 -0.926 0.109</span>
<span class="co">#&gt;  9 2021-04-06 15:43:00 0.363 -1.02  0.168</span>
<span class="co">#&gt; 10 2021-04-06 15:43:00 0.418 -0.996 0.387</span>
<span class="co">#&gt; # … with 29,990 more rows</span></code></pre></div>
<p>It shows the data with four columns – one for the timestamp and one for each of the accelerometer axes (<em>X</em>, <em>Y</em> and <em>Z</em>) – and a 6-line header with metadata. Among this metadata is the accelerometer data start time and sampling frequency, extracted from the csv file header, and also information about the accelerometer placement and the subject body mass, that are needed for applying the mechanical loading prediction models. It also shows information about the filter applied to the accelerometer signal and the data dimensions (30000 rows and 4 columns in this case).</p>
<p>Remember that, when using this function to read your own data, you need to specify the correct path to it. For example, if you have a file named <code>id_001_raw_acceleration.csv</code> inside the <code>accelerometer_data</code> folder in your <code>Desktop</code>, you need to write the path to it:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># For macOS or Linux</span>
<span class="fu"><a href="../reference/read_acc.html">read_acc</a></span><span class="op">(</span><span class="st">"~/Desktop/accelerometer_data/id_001_raw_acceleration.csv"</span><span class="op">)</span>
<span class="co"># For Windows</span>
<span class="fu"><a href="../reference/read_acc.html">read_acc</a></span><span class="op">(</span><span class="st">"C:/Users/username/Desktop/accelerometer_data/id_001_raw_acceleration.csv"</span><span class="op">)</span></code></pre></div>
</div>
<div id="define_region" class="section level3">
<h3 class="hasAnchor">
<a href="#define_region" class="anchor"></a>define_region()</h3>
<p><code><a href="../reference/define_region.html">define_region()</a></code> is an optional function to be used when you only want to analyse a specify portion of your data. To use it, you must specify the start and end time of your region of interest to the <code>start_time</code> and <code>end_time</code> arguments, along with the data read by the <code><a href="../reference/read_acc.html">read_acc()</a></code> function to the <code>data</code> argument:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_region.html">define_region</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">acc_data</span>,
  start_time <span class="op">=</span> <span class="st">"2021-04-06 15:45:00"</span>,
  end_time <span class="op">=</span> <span class="st">"2021-04-06 15:46:00"</span>
<span class="op">)</span>
<span class="va">acc_data</span>
<span class="co">#&gt; # Start time:              2021-04-06 15:43:00</span>
<span class="co">#&gt; # Sampling frequency:      100Hz</span>
<span class="co">#&gt; # Accelerometer placement: Non-specified</span>
<span class="co">#&gt; # Subject body mass:       Non-specified</span>
<span class="co">#&gt; # Filter:                  No filter applied</span>
<span class="co">#&gt; # Data dimensions:         6,000 × 4</span>
<span class="co">#&gt;    timestamp            acc_X acc_Y acc_Z</span>
<span class="co">#&gt;    &lt;dttm&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2021-04-06 15:45:00 -0.148 -1.05 0.094</span>
<span class="co">#&gt;  2 2021-04-06 15:45:00 -0.098 -1.08 0.176</span>
<span class="co">#&gt;  3 2021-04-06 15:45:00 -0.055 -1.11 0.234</span>
<span class="co">#&gt;  4 2021-04-06 15:45:00 -0.035 -1.12 0.254</span>
<span class="co">#&gt;  5 2021-04-06 15:45:00 -0.02  -1.11 0.23 </span>
<span class="co">#&gt;  6 2021-04-06 15:45:00 -0.004 -1.09 0.184</span>
<span class="co">#&gt;  7 2021-04-06 15:45:00  0.004 -1.06 0.152</span>
<span class="co">#&gt;  8 2021-04-06 15:45:00 -0.004 -1.08 0.152</span>
<span class="co">#&gt;  9 2021-04-06 15:45:00  0.008 -1.15 0.176</span>
<span class="co">#&gt; 10 2021-04-06 15:45:00  0.039 -1.20 0.195</span>
<span class="co">#&gt; # … with 5,990 more rows</span></code></pre></div>
</div>
<div id="specify_parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#specify_parameters" class="anchor"></a>specify_parameters()</h3>
<p>Apart from the raw accelerometer data, the mechanical loading prediction models need informations regarding the accelerometer body placement and the subject body mass. These informations are provided to impactr by the function <code><a href="../reference/specify_parameters.html">specify_parameters()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/specify_parameters.html">specify_parameters</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">acc_data</span>, acc_placement <span class="op">=</span> <span class="st">"hip"</span>, subj_body_mass <span class="op">=</span> <span class="fl">78</span>
<span class="op">)</span>
<span class="va">acc_data</span>
<span class="co">#&gt; # Start time:              2021-04-06 15:43:00</span>
<span class="co">#&gt; # Sampling frequency:      100Hz</span>
<span class="co">#&gt; # Accelerometer placement: Hip</span>
<span class="co">#&gt; # Subject body mass:       78kg</span>
<span class="co">#&gt; # Filter:                  No filter applied</span>
<span class="co">#&gt; # Data dimensions:         6,000 × 4</span>
<span class="co">#&gt;    timestamp            acc_X acc_Y acc_Z</span>
<span class="co">#&gt;    &lt;dttm&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2021-04-06 15:45:00 -0.148 -1.05 0.094</span>
<span class="co">#&gt;  2 2021-04-06 15:45:00 -0.098 -1.08 0.176</span>
<span class="co">#&gt;  3 2021-04-06 15:45:00 -0.055 -1.11 0.234</span>
<span class="co">#&gt;  4 2021-04-06 15:45:00 -0.035 -1.12 0.254</span>
<span class="co">#&gt;  5 2021-04-06 15:45:00 -0.02  -1.11 0.23 </span>
<span class="co">#&gt;  6 2021-04-06 15:45:00 -0.004 -1.09 0.184</span>
<span class="co">#&gt;  7 2021-04-06 15:45:00  0.004 -1.06 0.152</span>
<span class="co">#&gt;  8 2021-04-06 15:45:00 -0.004 -1.08 0.152</span>
<span class="co">#&gt;  9 2021-04-06 15:45:00  0.008 -1.15 0.176</span>
<span class="co">#&gt; 10 2021-04-06 15:45:00  0.039 -1.20 0.195</span>
<span class="co">#&gt; # … with 5,990 more rows</span></code></pre></div>
<p>The supported accelerometer placements are “ankle”, “back” or “hip” and the body mass must be given as kilograms. Notice that these informations are added to the data header.</p>
</div>
<div id="filter_acc" class="section level3">
<h3 class="hasAnchor">
<a href="#filter_acc" class="anchor"></a>filter_acc()</h3>
<p>The raw accelerometer data can be digitally filtered to reduce noise. The <code><a href="../reference/filter_acc.html">filter_acc()</a></code> function does it by getting the coefficients of a Butterworth digital filter and applying it twice (forwards and backwards) to the acceleration signal. The simplest way to use it is to call the <code><a href="../reference/filter_acc.html">filter_acc()</a></code> function supplying only the accelerometer data:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_acc.html">filter_acc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">acc_data</span><span class="op">)</span>
<span class="va">acc_data</span>
<span class="co">#&gt; # Start time:              2021-04-06 15:43:00</span>
<span class="co">#&gt; # Sampling frequency:      100Hz</span>
<span class="co">#&gt; # Accelerometer placement: Hip</span>
<span class="co">#&gt; # Subject body mass:       78kg</span>
<span class="co">#&gt; # Filter:                  Butterworth (4th-ord, low-pass, 20Hz)</span>
<span class="co">#&gt; # Data dimensions:         6,000 × 4</span>
<span class="co">#&gt;    timestamp               acc_X  acc_Y  acc_Z</span>
<span class="co">#&gt;    &lt;dttm&gt;                  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2021-04-06 15:45:00 -0.0900   -0.742 0.0878</span>
<span class="co">#&gt;  2 2021-04-06 15:45:00 -0.102    -1.08  0.171 </span>
<span class="co">#&gt;  3 2021-04-06 15:45:00 -0.0768   -1.20  0.235 </span>
<span class="co">#&gt;  4 2021-04-06 15:45:00 -0.0375   -1.16  0.253 </span>
<span class="co">#&gt;  5 2021-04-06 15:45:00 -0.00870  -1.09  0.229 </span>
<span class="co">#&gt;  6 2021-04-06 15:45:00  0.000810 -1.06  0.188 </span>
<span class="co">#&gt;  7 2021-04-06 15:45:00 -0.00329  -1.07  0.156 </span>
<span class="co">#&gt;  8 2021-04-06 15:45:00 -0.00753  -1.10  0.148 </span>
<span class="co">#&gt;  9 2021-04-06 15:45:00  0.00602  -1.14  0.166 </span>
<span class="co">#&gt; 10 2021-04-06 15:45:00  0.0510   -1.19  0.206 </span>
<span class="co">#&gt; # … with 5,990 more rows</span></code></pre></div>
<p>This function lets you select the order, cut-off frequency and type of the Butterworth filter (more details in the function documentation <code><a href="../reference/filter_acc.html">help(filter_acc)</a></code>). To better reproduce the conditions in which the models validation were performed, we suggest you not to change the default values of <code>order</code>, <code>cutoff</code> and <code>type</code> arguments, unless you have a strong reason to do so.</p>
</div>
<div id="use_resultant" class="section level3">
<h3 class="hasAnchor">
<a href="#use_resultant" class="anchor"></a>use_resultant()</h3>
<p>The mechanical loading prediction models included in impactr work with either the acceleration vertical vector or the resultant vector computed as the Euclidean norm of the three vectors <span class="math inline">\((r = \sqrt{X^2 + Y^2 + Z^2})\)</span>. To compute the resultant you can use the <code><a href="../reference/use_resultant.html">use_resultant()</a></code> function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/use_resultant.html">use_resultant</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">acc_data</span><span class="op">)</span>
<span class="va">acc_data</span>
<span class="co">#&gt; # Start time:              2021-04-06 15:43:00</span>
<span class="co">#&gt; # Sampling frequency:      100Hz</span>
<span class="co">#&gt; # Accelerometer placement: Hip</span>
<span class="co">#&gt; # Subject body mass:       78kg</span>
<span class="co">#&gt; # Filter:                  Butterworth (4th-ord, low-pass, 20Hz)</span>
<span class="co">#&gt; # Data dimensions:         6,000 × 5</span>
<span class="co">#&gt;    timestamp               acc_X  acc_Y  acc_Z acc_R</span>
<span class="co">#&gt;    &lt;dttm&gt;                  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2021-04-06 15:45:00 -0.0900   -0.742 0.0878 0.753</span>
<span class="co">#&gt;  2 2021-04-06 15:45:00 -0.102    -1.08  0.171  1.10 </span>
<span class="co">#&gt;  3 2021-04-06 15:45:00 -0.0768   -1.20  0.235  1.22 </span>
<span class="co">#&gt;  4 2021-04-06 15:45:00 -0.0375   -1.16  0.253  1.18 </span>
<span class="co">#&gt;  5 2021-04-06 15:45:00 -0.00870  -1.09  0.229  1.11 </span>
<span class="co">#&gt;  6 2021-04-06 15:45:00  0.000810 -1.06  0.188  1.07 </span>
<span class="co">#&gt;  7 2021-04-06 15:45:00 -0.00329  -1.07  0.156  1.08 </span>
<span class="co">#&gt;  8 2021-04-06 15:45:00 -0.00753  -1.10  0.148  1.11 </span>
<span class="co">#&gt;  9 2021-04-06 15:45:00  0.00602  -1.14  0.166  1.15 </span>
<span class="co">#&gt; 10 2021-04-06 15:45:00  0.0510   -1.19  0.206  1.21 </span>
<span class="co">#&gt; # … with 5,990 more rows</span></code></pre></div>
<p>This function add a new column <code>acc_R</code> with the resultant acceleration values. We suggest to utilise this function after <code><a href="../reference/filter_acc.html">filter_acc()</a></code>, otherwise the resultant vector computation will use the non-filtered acceleration signal.</p>
</div>
<div id="find_peaks" class="section level3">
<h3 class="hasAnchor">
<a href="#find_peaks" class="anchor"></a>find_peaks()</h3>
<p>To apply the prediction models, the peaks in the acceleration signal should be found. The <code><a href="../reference/find_peaks.html">find_peaks()</a></code> function does it and returns the timestamp of the peak in a column and its magnitude in another. The <code>vector</code> argument controls in which vector the peaks should be found and can be set to either <code>vertical</code>, <code>resultant</code> or <code>all</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_peaks.html">find_peaks</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">acc_data</span>, vector <span class="op">=</span> <span class="st">"resultant"</span><span class="op">)</span>
<span class="va">acc_data</span>
<span class="co">#&gt; # Start time:              2021-04-06 15:43:00</span>
<span class="co">#&gt; # Sampling frequency:      100Hz</span>
<span class="co">#&gt; # Accelerometer placement: Hip</span>
<span class="co">#&gt; # Subject body mass:       78kg</span>
<span class="co">#&gt; # Filter:                  Butterworth (4th-ord, low-pass, 20Hz)</span>
<span class="co">#&gt; # Data dimensions:         32 × 2</span>
<span class="co">#&gt;    timestamp           resultant_peak_acc</span>
<span class="co">#&gt;    &lt;dttm&gt;                           &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2021-04-06 15:45:00               1.32</span>
<span class="co">#&gt;  2 2021-04-06 15:45:01               1.36</span>
<span class="co">#&gt;  3 2021-04-06 15:45:04               1.30</span>
<span class="co">#&gt;  4 2021-04-06 15:45:04               2.32</span>
<span class="co">#&gt;  5 2021-04-06 15:45:05               1.50</span>
<span class="co">#&gt;  6 2021-04-06 15:45:06               1.68</span>
<span class="co">#&gt;  7 2021-04-06 15:45:06               1.51</span>
<span class="co">#&gt;  8 2021-04-06 15:45:07               1.96</span>
<span class="co">#&gt;  9 2021-04-06 15:45:08               1.37</span>
<span class="co">#&gt; 10 2021-04-06 15:45:08               1.86</span>
<span class="co">#&gt; # … with 22 more rows</span></code></pre></div>
<p>As with <code><a href="../reference/filter_acc.html">filter_acc()</a></code>, <code><a href="../reference/find_peaks.html">find_peaks()</a></code> default values of the minimum height (<code>min_height</code>) and distance (<code>min_dist</code>) of the peaks are set to replicate the values used in the calibration study. You should only change them if you have a strong reason to.</p>
</div>
<div id="predict_loading" class="section level3">
<h3 class="hasAnchor">
<a href="#predict_loading" class="anchor"></a>predict_loading()</h3>
<p>Finally, the <code><a href="../reference/predict_loading.html">predict_loading()</a></code> is used to predict the mechanical loading variables based on the acceleration signal. Currently, impactr provides models to predict ground reaction force (GRF) and loading rate (LR) of the resultant vector and its vertical component with a models validated in walking and running activities. The <code>outcome</code>, <code>vector</code> and <code>model</code> arguments are used to control this parameters. More details regarding the values accepted by these paremeters can be found in the function documentation (<code><a href="../reference/predict_loading.html">help(predict_loading)</a></code>).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/predict_loading.html">predict_loading</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">acc_data</span>,
  outcome <span class="op">=</span> <span class="st">"grf"</span>,
  vector <span class="op">=</span> <span class="st">"resultant"</span>,
  model <span class="op">=</span> <span class="st">"walking/running"</span>
<span class="op">)</span>
<span class="co">#&gt; # Start time:              2021-04-06 15:43:00</span>
<span class="co">#&gt; # Sampling frequency:      100Hz</span>
<span class="co">#&gt; # Accelerometer placement: Hip</span>
<span class="co">#&gt; # Subject body mass:       78kg</span>
<span class="co">#&gt; # Filter:                  Butterworth (4th-ord, low-pass, 20Hz)</span>
<span class="co">#&gt; # Data dimensions:         32 × 3</span>
<span class="co">#&gt;    timestamp           resultant_peak_acc resultant_peak_grf</span>
<span class="co">#&gt;    &lt;dttm&gt;                           &lt;dbl&gt;              &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2021-04-06 15:45:00               1.32              1387.</span>
<span class="co">#&gt;  2 2021-04-06 15:45:01               1.36              1392.</span>
<span class="co">#&gt;  3 2021-04-06 15:45:04               1.30              1384.</span>
<span class="co">#&gt;  4 2021-04-06 15:45:04               2.32              1521.</span>
<span class="co">#&gt;  5 2021-04-06 15:45:05               1.50              1412.</span>
<span class="co">#&gt;  6 2021-04-06 15:45:06               1.68              1435.</span>
<span class="co">#&gt;  7 2021-04-06 15:45:06               1.51              1412.</span>
<span class="co">#&gt;  8 2021-04-06 15:45:07               1.96              1473.</span>
<span class="co">#&gt;  9 2021-04-06 15:45:08               1.37              1393.</span>
<span class="co">#&gt; 10 2021-04-06 15:45:08               1.86              1459.</span>
<span class="co">#&gt; # … with 22 more rows</span></code></pre></div>
<p>As can be seen above, <code><a href="../reference/predict_loading.html">predict_loading()</a></code> adds columns to the supplied <code>data</code> corresponding to the <code>outcome</code> and <code>vector</code> specified in the arguments. Note that GRF are expressed as newton (N) and LR as newton per second (N·s<sup>-1</sup>)</p>
</div>
</div>
<div id="wrap-up" class="section level2">
<h2 class="hasAnchor">
<a href="#wrap-up" class="anchor"></a>Wrap up</h2>
<p>impactr helps you to move from the raw accelerometer data to discrete estimates of mechanical loading variables in an easy way. All the functions necessary to this analysis are described above in a step-by-step manner. These functions were also designed to be used with pipe operators (either of the <a href="https://magrittr.tidyverse.org"><code>magrittr</code></a> package or the base R package for R version &gt;= 4.1.0). By using the pipe, the output of a function call is passed directly to the next, avoiding nested function calls or the need to assign local variables. Below are examples the whole analysis assigning local variables in intermediate steps and using the base R pipe:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Using intermediate steps</span>
<span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_acc.html">read_acc</a></span><span class="op">(</span><span class="fu"><a href="../reference/impactr_example.html">impactr_example</a></span><span class="op">(</span><span class="st">"hip-raw.csv"</span><span class="op">)</span><span class="op">)</span>
<span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/specify_parameters.html">specify_parameters</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">acc_data</span>, acc_placement <span class="op">=</span> <span class="st">"hip"</span>, subj_body_mass <span class="op">=</span> <span class="fl">78</span>
<span class="op">)</span>
<span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_acc.html">filter_acc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">acc_data</span><span class="op">)</span>
<span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/use_resultant.html">use_resultant</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">acc_data</span><span class="op">)</span>
<span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_peaks.html">find_peaks</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">acc_data</span>, vector <span class="op">=</span> <span class="st">"resultant"</span><span class="op">)</span>
<span class="va">acc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predict_loading.html">predict_loading</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">acc_data</span>,
  outcome <span class="op">=</span> <span class="st">"grf"</span>,
  vector <span class="op">=</span> <span class="st">"resultant"</span>,
  model <span class="op">=</span> <span class="st">"walking/running"</span>
<span class="op">)</span>

<span class="co"># Using the base R pipe operator</span>
<span class="fu"><a href="../reference/read_acc.html">read_acc</a></span><span class="op">(</span><span class="fu"><a href="../reference/impactr_example.html">impactr_example</a></span><span class="op">(</span><span class="st">"hip-raw.csv"</span><span class="op">)</span><span class="op">)</span> |&gt;
  <span class="fu"><a href="../reference/specify_parameters.html">specify_parameters</a></span><span class="op">(</span>acc_placement <span class="op">=</span> <span class="st">"hip"</span>, subj_body_mass <span class="op">=</span> <span class="fl">78</span><span class="op">)</span> |&gt;
  <span class="fu"><a href="../reference/filter_acc.html">filter_acc</a></span><span class="op">(</span><span class="op">)</span> |&gt;
  <span class="fu"><a href="../reference/use_resultant.html">use_resultant</a></span><span class="op">(</span><span class="op">)</span> |&gt;
  <span class="fu"><a href="../reference/find_peaks.html">find_peaks</a></span><span class="op">(</span>vector <span class="op">=</span> <span class="st">"resultant"</span><span class="op">)</span> |&gt;
  <span class="fu"><a href="../reference/predict_loading.html">predict_loading</a></span><span class="op">(</span>
    outcome <span class="op">=</span> <span class="st">"grf"</span>,
    vector <span class="op">=</span> <span class="st">"resultant"</span>,
    model <span class="op">=</span> <span class="st">"walking/running"</span>
  <span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://lveras.com">Lucas Veras</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
