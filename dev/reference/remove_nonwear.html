<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Detect and remove accelerometer non-wear time — remove_nonwear • impactr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Detect and remove accelerometer non-wear time — remove_nonwear"><meta property="og:description" content="Detects the accelerometer non-wear time based on an algorithm developed
by van Hees (see Details) and remove these periods from the raw data. This
function can also draw a plot to better visualize the detected non-wear
periods and generate a wear time daily summary."><meta property="og:image" content="https://lveras.com/impactr/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">impactr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/impactr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/verasls/impactr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Detect and remove accelerometer non-wear time</h1>
    <small class="dont-index">Source: <a href="https://github.com/verasls/impactr/blob/HEAD/R/non_wear.R" class="external-link"><code>R/non_wear.R</code></a></small>
    <div class="hidden name"><code>remove_nonwear.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Detects the accelerometer non-wear time based on an algorithm developed
by van Hees (see Details) and remove these periods from the raw data. This
function can also draw a plot to better visualize the detected non-wear
periods and generate a wear time daily summary.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">remove_nonwear</span><span class="op">(</span>
  <span class="va">data</span>,
  window1 <span class="op">=</span> <span class="fl">60</span>,
  window2 <span class="op">=</span> <span class="fl">15</span>,
  threshold <span class="op">=</span> <span class="fl">2</span>,
  min_hour_crit <span class="op">=</span> <span class="fl">0</span>,
  min_day_crit <span class="op">=</span> <span class="fl">0</span>,
  plot <span class="op">=</span> <span class="cn">FALSE</span>,
  save_plot <span class="op">=</span> <span class="cn">FALSE</span>,
  save_summary <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>An <code>impactr_data</code> object, as obtained with
<a href="read_acc.html">read_acc()</a>.</p></dd>
<dt>window1, window2</dt>
<dd><p>Windows size, in minutes, for the non-wear
detection algorithm. Defaults to 60 and 15 minutes, respectively.
Also, <code>window2</code> must be smaller than <code>window1</code>, and
<code>window1</code> must be a multiple of <code>window2</code>.</p></dd>
<dt>threshold</dt>
<dd><p>Number of axes that need to meet the non-wear criteria.
Defaults to 2.</p></dd>
<dt>min_hour_crit</dt>
<dd><p>The minimum number of hours marked as wear time
in a day for it to be considered valid (see Data validation).
Defaults to 0, meaning that every day is considered valid.</p></dd>
<dt>min_day_crit</dt>
<dd><p>The minimum number of valid days for the data of
a given subject to be considered valid (see Data validation).
Defaults to 0, meaning that all data is valid.</p></dd>
<dt>plot</dt>
<dd><p>A logical value indicating whether or not to display the
plot to visualize the detected non-wear periods. Defaults to <code>FALSE</code>.
Notice that the plot will only be displayed in your R session if you do
not provide a path to save the plot (see the argument <code>save_plot</code>).</p></dd>
<dt>save_plot, save_summary</dt>
<dd><p>Indicates whether of not to save the plot to
visualize the detected non-wear periods to a pdf file and the wear time
daily summary to a csv file, respectively. Defaults to <code>FALSE</code>.
Provide a valid path to a file, ending with the ".pdf" extension for the
plot or with the ".csv" extension to the summary, as a character string
if you want the outputs to be saved.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An object of class <code>impactr_data</code> and a plot if
<code>plot = TRUE</code> and <code>save_plot = FALSE</code>.</p>
    </div>
    <div id="the-non-wear-detection-algorithm">
    <h2>The non-wear detection algorithm</h2>
    


<p>The current version of this algorithm is described in a paper by van Hees
et al (see References) and also in this
<a href="https://cran.r-project.org/web/packages/GGIR/vignettes/GGIR.html#53_Non-wear_detection" class="external-link">vignette</a> from package GGIR.
Briefly, in a first stage it identifies non-wear time based on threshold
values of standard deviation (0.013<em>g</em>) and range (0.050<em>g</em>) of
raw acceleration from each axis. The classification is done per blocks of
<code>window2</code> size (default 15 minutes) based on the characteristics of
a larger <code>window1</code> (default 60 minutes) centred at the
<code>window2</code>. In the second stage of the algorithm, the plausibility of
wear periods in between non-wear periods is tested based on the duration
and proportion of the duration relative to the surrounding non-wear
periods.</p>
    </div>
    <div id="data-validation">
    <h2>Data validation</h2>
    


<p>After the detection of non-wear periods through the algorithm, a data
validation step is applied. For each measurement day to be considered
valid, it has to present a minimum number of wear time hours determined
by the <code>min_hour_crit</code> argument. If the number of wear time hours of
a given day falls below the threshold, the whole day is considered invalid
and is then removed from the subsequent analyses. The whole measurement
is also classified as valid or invalid based on the number of valid days
and a threshold given by <code>min_day_crit</code>. If the number of valid days
is less than the value determined by the <code>min_day_crit</code> argument,
the whole data is deleted and the <code>remove_nonwear()</code> function
signals an error, stopping its execution. Nevertheless, this error does
not prevent the plot to be displayed or saved, or the wear time daily
summary to be saved, if the arguments are set to do so.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    
<ul><li><p>van Hees VT, Gorzelniak L, Dean León EC, Eder M, Pias M, Taherian S,
Ekelund U, Renström F, Franks PW, Horsch A, Brage S. Separating movement
and gravity components in an acceleration signal and implications for the
assessment of human daily physical activity. PLoS One. 2013. Apr 23.
doi: <a href="https://doi.org/10.1371/journal.pone.0061691" class="external-link">10.1371/journal.pone.0061691</a>
.</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu">remove_nonwear</span><span class="op">(</span><span class="va">daily_acc</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Start time:              2017-01-03 00:01:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Sampling frequency:      100Hz</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Accelerometer placement: Non-specified</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Subject body mass:       Non-specified</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Filter:                  No filter applied</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Data dimensions:         13,500,000 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    timestamp           acc_X acc_Y  acc_Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2017-01-03 <span style="color: #949494;">11:31:00</span> 0.063 0.137 -<span style="color: #BB0000;">0.949</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2017-01-03 <span style="color: #949494;">11:31:00</span> 0.063 0.137 -<span style="color: #BB0000;">0.949</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2017-01-03 <span style="color: #949494;">11:31:00</span> 0.063 0.137 -<span style="color: #BB0000;">0.949</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2017-01-03 <span style="color: #949494;">11:31:00</span> 0.063 0.137 -<span style="color: #BB0000;">0.949</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2017-01-03 <span style="color: #949494;">11:31:00</span> 0.063 0.137 -<span style="color: #BB0000;">0.949</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2017-01-03 <span style="color: #949494;">11:31:00</span> 0.063 0.137 -<span style="color: #BB0000;">0.949</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2017-01-03 <span style="color: #949494;">11:31:00</span> 0.063 0.137 -<span style="color: #BB0000;">0.949</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2017-01-03 <span style="color: #949494;">11:31:00</span> 0.063 0.137 -<span style="color: #BB0000;">0.949</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2017-01-03 <span style="color: #949494;">11:31:00</span> 0.063 0.137 -<span style="color: #BB0000;">0.949</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2017-01-03 <span style="color: #949494;">11:31:00</span> 0.063 0.137 -<span style="color: #BB0000;">0.949</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 13,499,990 more rows</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://lveras.com" class="external-link">Lucas Veras</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

